{"ast":null,"code":"import _slicedToArray from\"E:/ReactJs/todoist/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{RiEdit2Fill,RiUpload2Line,RiDeleteBack2Fill}from\"react-icons/ri\";import{useSelector}from\"react-redux\";import{useState}from\"react\";import\"../style/app.css\";import firebase,{storage}from\"../Firebase/firebase_config\";import React from\"react\";import{Redirect}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Details=function Details(){var Id=JSON.parse(Object(window.localStorage.getItem(\"Info\"))).id;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),city=_useState6[0],setCity=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),state=_useState8[0],setState=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),country=_useState10[0],setCountry=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),phone=_useState12[0],setPhone=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),editButton=_useState14[0],setEditButton=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),image=_useState16[0],setImage=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),upload=_useState18[0],setUpload=_useState18[1];var mystate=useSelector(function(state){return state.Fetch;});if(!window.localStorage.getItem(\"Info\")){/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}var editProfile=function editProfile(){setEditButton(true);setEmail(mystate[0].email);setName(mystate[0].Name);setCity(mystate[0].City);setCountry(mystate[0].Country);setState(mystate[0].State);setPhone(mystate[0].Phone);};var saveProfile=function saveProfile(){var Userref=firebase.database().ref(\"User\");Userref.child(Id).update({Country:country,email:email,City:city,Name:name,State:state,Phone:phone});setEditButton(false);};var onImageChange=function onImageChange(e){var reader=new FileReader();var file=e.target.files[0];if(file){reader.onload=function(){if(reader.readyState===2){setImage(file);}};reader.readAsDataURL(e.target.files[0]);setUpload(true);}else{setImage(null);}};var removeImage=function removeImage(){var Userref=firebase.database().ref(\"User\");Userref.child(Id).update({Imageurl:\"https://www.computerhope.com/jargon/g/guest-user.jpg\"});};var uploadToFirebase=function uploadToFirebase(){if(image){var storageRef=storage.ref();var imageRef=storageRef.child(image.name);imageRef.put(image);imageRef.getDownloadURL().then(function(url){alert(\"Image uploaded successfully to Firebase.\");var Userref=firebase.database().ref(\"User\");Userref.child(Id).update({Imageurl:url});setUpload(false);});}else{alert(\"Please upload an image first.\");setUpload(false);}};return/*#__PURE__*/_jsx(_Fragment,{children:mystate?/*#__PURE__*/_jsxs(\"div\",{className:\"Detailsdiv\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Deatilsimage\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:mystate[0].Imageurl,alt:\"UserImage\",width:\"170\",height:\"170\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{title:\"Upload\",htmlFor:\"image\",children:/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(RiUpload2Line,{})})}),/*#__PURE__*/_jsx(\"input\",{id:\"image\",type:\"file\",accept:\"image/*\",onChange:function onChange(e){onImageChange(e);}}),upload?/*#__PURE__*/_jsx(\"button\",{className:\"Uploadbutton\",onClick:uploadToFirebase,children:\"Upload\"}):null,!upload?/*#__PURE__*/_jsx(\"button\",{className:\"Uploadbutton\",title:\"Remove\",onClick:removeImage,children:/*#__PURE__*/_jsx(RiDeleteBack2Fill,{})}):null]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Ratingheading\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"YOUR RATING\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"ACTIVITY\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Ratingvalue\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\" 54%\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"93%\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Detailsname\",children:[editButton?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"Nameinput\",type:\"text\",value:name,onChange:function onChange(e){return setName(e.target.value);},required:true})}):/*#__PURE__*/_jsxs(\"h3\",{style:{marginLeft:\"20px\"},children:[\" \",mystate[0].Name]}),editButton?/*#__PURE__*/_jsxs(\"button\",{onClick:saveProfile,children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(RiEdit2Fill,{})}),\"Save\"]}):/*#__PURE__*/_jsxs(\"button\",{onClick:editProfile,children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(RiEdit2Fill,{})}),\"EDIT\"]})]}),/*#__PURE__*/_jsxs(\"h5\",{className:\"Namedetails\",children:[mystate[0].City,\", \",mystate[0].State]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Details\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"13px\"},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Email\"}),editButton?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"Emailinput\",style:{marginLeft:\"35px\"},type:\"email\",value:email,onChange:function onChange(e){return setCity(e.target.value);},required:true})}):/*#__PURE__*/_jsxs(\"h5\",{style:{marginLeft:\"35px\"},children:[\" \",mystate[0].email]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"City\"}),editButton?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"Cityinput\",style:{marginLeft:\"45px\"},type:\"text\",value:city,onChange:function onChange(e){return setCity(e.target.value);},required:true})}):/*#__PURE__*/_jsxs(\"h5\",{style:{marginLeft:\"45px\"},children:[\" \",mystate[0].City]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"State\"}),editButton?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"Stateinput\",style:{marginLeft:\"37px\"},type:\"text\",value:state,onChange:function onChange(e){return setState(e.target.value);},required:true})}):/*#__PURE__*/_jsxs(\"h5\",{style:{marginLeft:\"37px\"},children:[\" \",mystate[0].State]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Country\"}),editButton?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"Countryinput\",style:{marginLeft:\"18px\"},type:\"text\",value:country,onChange:function onChange(e){return setCountry(e.target.value);},required:true})}):/*#__PURE__*/_jsxs(\"h5\",{style:{marginLeft:\"18px\"},children:[\" \",mystate[0].Country]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Phone\"}),editButton?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"Phoneinput\",style:{marginLeft:\"28px\"},type:\"text\",value:phone,onChange:function onChange(e){return setPhone(e.target.value);},required:true})}):/*#__PURE__*/_jsxs(\"h5\",{style:{marginLeft:\"28px\"},children:[\" \",mystate[0].Phone]})]})]})]})]}):/*#__PURE__*/_jsx(\"h2\",{children:\"Loading...\"})});};export default Details;","map":{"version":3,"sources":["E:/ReactJs/todoist/src/component/Profile/details.tsx"],"names":["RiEdit2Fill","RiUpload2Line","RiDeleteBack2Fill","useSelector","useState","firebase","storage","React","Redirect","Details","Id","JSON","parse","Object","window","localStorage","getItem","id","email","setEmail","name","setName","city","setCity","state","setState","country","setCountry","phone","setPhone","editButton","setEditButton","image","setImage","upload","setUpload","mystate","Fetch","editProfile","Name","City","Country","State","Phone","saveProfile","Userref","database","ref","child","update","onImageChange","e","reader","FileReader","file","target","files","onload","readyState","readAsDataURL","removeImage","Imageurl","uploadToFirebase","storageRef","imageRef","put","getDownloadURL","then","url","alert","value","marginLeft","marginTop"],"mappings":"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","sourcesContent":["import { RiEdit2Fill, RiUpload2Line, RiDeleteBack2Fill } from \"react-icons/ri\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useState } from \"react\";\r\nimport \"../style/app.css\";\r\nimport firebase, { storage } from \"../Firebase/firebase_config\";\r\nimport React from \"react\";\r\nimport { Redirect } from \"react-router\";\r\n\r\nconst Details = () => {\r\n  const Id = JSON.parse(Object(window.localStorage.getItem(\"Info\"))).id;\r\n  const [email, setEmail] = useState<string>(\"\");\r\n  const [name, setName] = useState<string>(\"\");\r\n  const [city, setCity] = useState<string>(\"\");\r\n  const [state, setState] = useState<string>(\"\");\r\n  const [country, setCountry] = useState<string>(\"\");\r\n  const [phone, setPhone] = useState<string>(\"\");\r\n  const [editButton, setEditButton] = useState<boolean>(false);\r\n  const [image, setImage] = useState<any>(null);\r\n  const [upload, setUpload] = useState<boolean>(false);\r\n  const mystate = useSelector((state: any) => state.Fetch);\r\n\r\n\r\n  if (!window.localStorage.getItem(\"Info\")) {\r\n    <Redirect to=\"/\" />;\r\n  }\r\n\r\n\r\n  const editProfile = () => {\r\n    setEditButton(true);\r\n    setEmail(mystate[0].email);\r\n    setName(mystate[0].Name);\r\n    setCity(mystate[0].City);\r\n    setCountry(mystate[0].Country);\r\n    setState(mystate[0].State);\r\n    setPhone(mystate[0].Phone);\r\n\r\n  };\r\n  const saveProfile = () => {\r\n    const Userref = firebase.database().ref(\"User\");\r\n    Userref.child(Id).update({\r\n      Country: country,\r\n      email: email,\r\n      City: city,\r\n      Name: name,\r\n      State: state,\r\n      Phone: phone,\r\n    })\r\n    setEditButton(false);\r\n    };\r\n\r\n  const onImageChange = (e: any) => {\r\n    const reader = new FileReader();\r\n    let file = e.target.files[0];\r\n    if (file) {\r\n      reader.onload = () => {\r\n        if (reader.readyState === 2) {\r\n          \r\n          setImage(file);\r\n        }\r\n      };\r\n      reader.readAsDataURL(e.target.files[0]);\r\n      setUpload(true);\r\n    } else {\r\n      setImage(null);\r\n    }\r\n  };\r\n  const removeImage = () => {\r\n    const Userref = firebase.database().ref(\"User\");\r\n    Userref.child(Id).update({\r\n      Imageurl: \"https://www.computerhope.com/jargon/g/guest-user.jpg\",\r\n    });\r\n  };\r\n  const uploadToFirebase = () => {\r\n    if (image) {\r\n      const storageRef = storage.ref();\r\n      const imageRef = storageRef.child(image.name);\r\n      imageRef.put(image);\r\n      imageRef.getDownloadURL().then((url) => {\r\n        alert(\"Image uploaded successfully to Firebase.\");\r\n        const Userref = firebase.database().ref(\"User\");\r\n        Userref.child(Id).update({\r\n          Imageurl: url,\r\n        });\r\n        setUpload(false);\r\n      });\r\n    } else {\r\n      alert(\"Please upload an image first.\");\r\n\r\n      setUpload(false);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      {mystate ? (\r\n        <div className=\"Detailsdiv\">\r\n          <div className=\"Deatilsimage\">\r\n            <div>\r\n              <img\r\n                src={mystate[0].Imageurl}\r\n                alt=\"UserImage\"\r\n                width=\"170\"\r\n                height=\"170\"\r\n              />\r\n              <div>\r\n                <label title=\"Upload\" htmlFor=\"image\">\r\n                  <span>\r\n                    <RiUpload2Line />\r\n                  </span>\r\n                </label>\r\n                <input\r\n                  id=\"image\"\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  onChange={(e) => {\r\n                    onImageChange(e);\r\n                  }}\r\n                />\r\n\r\n                {upload ? (\r\n                  <button className=\"Uploadbutton\" onClick={uploadToFirebase}>\r\n                    Upload\r\n                  </button>\r\n                ) : null}\r\n\r\n                {!upload ? (\r\n                  <button\r\n                    className=\"Uploadbutton\"\r\n                    title=\"Remove\"\r\n                    onClick={removeImage}\r\n                  >\r\n                    <RiDeleteBack2Fill />\r\n                  </button>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n            <div className=\"Ratingheading\">\r\n              <h5>YOUR RATING</h5>\r\n              <h5>ACTIVITY</h5>\r\n            </div>\r\n            <div className=\"Ratingvalue\">\r\n              <h5> 54%</h5>\r\n              <h5>93%</h5>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <div className=\"Detailsname\">\r\n              {editButton ? (\r\n                <div>\r\n                    <input\r\n                      className=\"Nameinput\"\r\n                      type=\"text\"\r\n                      value={name}\r\n                      onChange={e=>setName(e.target.value)}\r\n                      required\r\n                    />\r\n                </div>\r\n              ) : (\r\n                <h3 style={{ marginLeft: \"20px\" }}> {mystate[0].Name}</h3>\r\n              )}\r\n\r\n              {editButton ? (\r\n                <button onClick={saveProfile}>\r\n                  <span>\r\n                    <RiEdit2Fill />\r\n                  </span>\r\n                  Save\r\n                </button>\r\n              ) : (\r\n                <button onClick={editProfile}>\r\n                  <span>\r\n                    <RiEdit2Fill />\r\n                  </span>\r\n                  EDIT\r\n                </button>\r\n              )}\r\n            </div>\r\n            <h5 className=\"Namedetails\">\r\n              {mystate[0].City}, {mystate[0].State}\r\n            </h5>\r\n\r\n            <div className=\"Details\">\r\n              <div style={{ marginTop: \"13px\" }}>\r\n                <h4>Email</h4>\r\n                {editButton ? (\r\n                  <div>\r\n                      <input\r\n                        className=\"Emailinput\"\r\n                        style={{ marginLeft: \"35px\" }}\r\n                        type=\"email\"\r\n                        value={email}\r\n                        onChange={e=>setCity(e.target.value)}\r\n                        required\r\n                      />\r\n                  </div>\r\n                ) : (\r\n                  <h5 style={{ marginLeft: \"35px\" }}> {mystate[0].email}</h5>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <h4>City</h4>\r\n                {editButton ? (\r\n                  <div>\r\n                      <input\r\n                        className=\"Cityinput\"\r\n                        style={{ marginLeft: \"45px\" }}\r\n                        type=\"text\"\r\n                        value={city}\r\n                        onChange={e=>setCity(e.target.value)}\r\n                        required\r\n                      />\r\n                  </div>\r\n                ) : (\r\n                  <h5 style={{ marginLeft: \"45px\" }}> {mystate[0].City}</h5>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <h4>State</h4>\r\n                {editButton ? (\r\n                  <div>\r\n                      <input\r\n                        className=\"Stateinput\"\r\n                        style={{ marginLeft: \"37px\" }}\r\n                        type=\"text\"\r\n                        value={state}\r\n                        onChange={e=>setState(e.target.value)}\r\n                        required\r\n                      />\r\n                  </div>\r\n                ) : (\r\n                  <h5 style={{ marginLeft: \"37px\" }}> {mystate[0].State}</h5>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <h4>Country</h4>\r\n                {editButton ? (\r\n                  <div>\r\n                      <input\r\n                        className=\"Countryinput\"\r\n                        style={{ marginLeft: \"18px\" }}\r\n                        type=\"text\"\r\n                        value={country}\r\n                        onChange={e=>setCountry(e.target.value)}\r\n                        required\r\n                      />\r\n                  </div>\r\n                ) : (\r\n                  <h5 style={{ marginLeft: \"18px\" }}> {mystate[0].Country}</h5>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <h4>Phone</h4>\r\n                {editButton ? (\r\n                  <div>\r\n                      <input\r\n                        className=\"Phoneinput\"\r\n                        style={{ marginLeft: \"28px\" }}\r\n                        type=\"text\"\r\n                        value={phone}\r\n                        onChange={e=>setPhone(e.target.value)}\r\n                        required\r\n                      />\r\n                  </div>\r\n                ) : (\r\n                  <h5 style={{ marginLeft: \"28px\" }}> {mystate[0].Phone}</h5>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <h2>Loading...</h2>\r\n      )}\r\n    </>\r\n  );\r\n};\r\nexport default Details;\r\n"]},"metadata":{},"sourceType":"module"}